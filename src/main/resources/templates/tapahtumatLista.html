<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Tapahtumalista</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>
	<h1>Kaikki tulevat tapahtumat</h1>
    <table>
		<tr>
		    <th>Tapahtuma nimi</th>
		    <th>Paikka</th>
			<th>Kuvaus</th>
			<th>Päivämäärä</th>
		</tr>  
    	<tr th:each = "tapahtuma : ${tapahtumat}">
    		<td th:text="${tapahtuma.nimi}"></td>
    		<td th:text="${tapahtuma.kaupunki.kaupunkinimi}"></td>
			<td th:text="${tapahtuma.kuvaus}"></td>	
			<td th:text="${tapahtuma.paivamaara}"></td>	
			<td><a th:href="@{/edit/{id}(id=${tapahtuma.id})}">Muokkaa</a></td>    	
<td>
				<form th:action="@{/delete/{id}(id=${tapahtuma.id})}" method="post" sec:authorize="hasAuthority('ADMIN')">
					<input type="hidden" name="_method" value="delete" />
					<button type="submit">Poista</button>	
				</form>
			</td>
    	</tr>
     </table>
	 <a href="/lomake">Lisää uusi tapahtuma</a>
</body>
</html>